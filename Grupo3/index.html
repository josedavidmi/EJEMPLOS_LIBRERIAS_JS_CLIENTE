<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Gastos + Quedadas</title>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    
    <!-- Day.js -->
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.9/dayjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.9/locale/es.js"></script>
    
    <!-- Leaflet (mapas) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- SortableJS -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>

    <!-- Archivo de estilos -->
    <link rel="stylesheet" href="./estilos.css">
 
    <script src="./prueba.js" defer></script>
    

</head>
<body>
    <div class="container">
        <h1> Gesti√≥n de Gastos + Quedadas</h1>

        <!-- SECCI√ìN 1: GR√ÅFICO + FILTRO FECHAS -->
        <div class="grid-2">
            <!-- Gr√°fico mensual / balance -->
            <div class="card">
                <h2> Gastos por categor√≠a</h2>
                <div class="filtro-fechas">
                    <input type="date" id="fecha-inicio" value="2026-02-01">
                    <input type="date" id="fecha-fin" value="2026-02-28">
                    <button onclick="aplicarFiltroFechas()">Filtrar</button>
                </div>
                <canvas id="grafico-gastos" style="width:100%; max-height:250px;"></canvas>
                <div class="total-gastos" id="total-gastos">Total: 0‚Ç¨</div>
            </div>

            <!-- Mapa Leaflet -->
            <div class="card">
                <h2> Quedada - Punto de encuentro</h2>
                <div id="mapa"></div>
                <div style="margin-top: 15px; display: flex; gap: 10px;">
                    <input type="text" id="lugar-quedada" placeholder="Ej: I.E.S. Ataulfo Argenta, Castro Urdiales" style="flex: 1; padding: 10px; border-radius: 8px; border: 2px solid #e0e0e0;">
                    <button onclick="actualizarMapa()" style="background: #C850C0; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Ir</button>
                </div>
                <p id="info-quedada" style="margin-top: 10px; color: #666;"></p>
            </div>
        </div>

        <!-- SECCI√ìN 2: TABLA GASTOS + SORTABLEJS -->
        <div class="grid-2">
            <!-- Tabla de gastos -->
            <div class="card">
                <h2> √öltimos gastos</h2>
                <table class="tabla-gastos" id="tabla-gastos">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Concepto</th>
                            <th>Categor√≠a</th>
                            <th>Importe</th>
                        </tr>
                    </thead>
                    <tbody id="tbody-gastos"></tbody>
                </table>
            </div>

            <!-- Lista participantes con SortableJS -->
            <div class="card">
                <h2>üë• Participantes (ordena arrastrando)</h2>
                <ul class="lista-participantes" id="lista-participantes">
                    <li class="participante-item">
                        <span class="drag-handle">‚ò∞</span>
                        <span style="flex: 1;">Ana Garc√≠a</span>
                        <span style="color: #4ECDC4;">45.50‚Ç¨</span>
                    </li>
                    <li class="participante-item">
                        <span class="drag-handle">‚ò∞</span>
                        <span style="flex: 1;">Carlos L√≥pez</span>
                        <span style="color: #4ECDC4;">32.00‚Ç¨</span>
                    </li>
                    <li class="participante-item">
                        <span class="drag-handle">‚ò∞</span>
                        <span style="flex: 1;">Mar√≠a Rodr√≠guez</span>
                        <span style="color: #4ECDC4;">28.75‚Ç¨</span>
                    </li>
                    <li class="participante-item">
                        <span class="drag-handle">‚ò∞</span>
                        <span style="flex: 1;">Juan Mart√≠nez</span>
                        <span style="color: #4ECDC4;">15.20‚Ç¨</span>
                    </li>
                </ul>
                
                <!-- Crear nueva quedada -->
                <div class="crear-quedada">
                    <h3 style="margin-bottom: 10px; font-size: 1.1rem;">üìÖ Nueva quedada</h3>
                    <input type="text" id="nombre-quedada" placeholder="Nombre de la quedada">
                    <input type="date" id="fecha-quedada" value="2026-02-20">
                    <button onclick="crearQuedada()" style="width: 100%; background: #FFCC70; color: #333; font-weight: bold;">Programar quedada</button>
                </div>
            </div>
        </div>
    </div>


</body>
</html>